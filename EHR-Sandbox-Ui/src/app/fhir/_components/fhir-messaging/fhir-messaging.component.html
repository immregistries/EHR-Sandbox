<mat-tab-group>
  <mat-tab label="Sending FHIR Resources to IIS">
    <div style="display: flex; justify-content: space-between; gap: 0px 5px"  >
      <div [style]="(vaccinationId > -1)? 'width: 50%': 'width: 100%'">
        <mat-progress-bar mode="query" *ngIf="patientLoading"></mat-progress-bar>
        <mat-form-field style="width: 100%;" appearance="fill">
          <mat-label>Patient Fhir Resource</mat-label>
          <textarea matInput style="height: 64vh;" placeholder="" [(ngModel)]="patientResource"> </textarea>
        </mat-form-field>
        <mat-form-field appearance="fill">
          <mat-label>Operation</mat-label>
          <mat-select [(ngModel)]="patientOperation" name="patientOperation">
            <mat-option [value]="'UpdateOrCreate'">Update Or Create</mat-option>
            <mat-option [value]="'Create'">Create</mat-option>
            <!-- <mat-option [value]="'Update'">Update</mat-option> -->
          </mat-select>
        </mat-form-field>
        <mat-checkbox appearance="fill" *ngIf="vaccinationId > -1"
          [(ngModel)]="autofillId">
          Autofill server Id in immunization
        </mat-checkbox>
        <button mat-raised-button class="w3-right" (click)="sendPatient()" cdkFocusInitial>Send to IIS</button>
        <p [ngStyle]="patientError ? {color: 'red'} : null" >{{patientAnswer}}</p>
      </div>


      <div style="width: 50%;" *ngIf="vaccinationId > -1">
        <mat-progress-bar mode="query" *ngIf="vaccinationLoading"></mat-progress-bar>
        <mat-form-field style="width: 100%;" appearance="fill">
          <mat-label>Vaccination Fhir rResource</mat-label>
          <textarea matInput style="height: 64vh;" placeholder="" [(ngModel)]="vaccinationResource"> </textarea>
        </mat-form-field>
        <mat-form-field appearance="fill">
          <mat-label>Operation</mat-label>
          <mat-select [(ngModel)]="immunizationOperation" name="immunizationOperation">
            <mat-option [value]="'UpdateOrCreate'">Update Or Create</mat-option>
            <mat-option [value]="'Create'">Create</mat-option>
            <!-- <mat-option [value]="'Update'">Update</mat-option> -->
          </mat-select>
        </mat-form-field>
        <mat-form-field appearance="fill" matTooltip="Overrides specified patient id in resource, can be automatically filled by created patient">
          <mat-label>Use Patient Id</mat-label>
          <input matInput [(ngModel)]="patientFhirId">
        </mat-form-field>
        <button mat-raised-button class="w3-right" (click)="sendVaccination()" cdkFocusInitial>Send to IIS</button>
        <p [ngStyle]="vaccinationError ? {color: 'red'} : null" >{{vaccinationAnswer}}</p>
      </div>
    </div>
  </mat-tab>

  <mat-tab label="Getting FHIR Resources from IIS">
    <div style="display: flex; justify-content: space-between; gap: 5px 5px"  >
      <div [style]="style">
        <app-fhir-get [resourceType]="'Patient'" [identifier]="(patientId >0)? patientId.toString(): ''"></app-fhir-get>
      </div>
      <div style="width: 50%;" >
        <app-fhir-get [resourceType]="'Immunization'" [identifier]="(vaccinationId >0)? vaccinationId.toString(): ''"></app-fhir-get>
      </div>
    </div>
  </mat-tab>
  <mat-tab label="Settings">
    <app-select-immregistry></app-select-immregistry>
  </mat-tab>
</mat-tab-group>

